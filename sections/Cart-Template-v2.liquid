<script class="cartFlagX"></script><div class="container container--cart-page">
	<div class="title-bar wrapper--page-title remove-margin-bottom">
		<h2 class="main-heading">{{ 'cart.general.title' | t }}</h2>
	</div>

	{% if cart.item_count == 0 %}
		<div class="empty-cart">{{ 'cart.general.empty' | t }}, <a href="{{ routes.all_products_collection_url }}">{{ 'cart.general.continue_browsing_html' | t }}</a></div>
	{% else %}

	<div class="cart-error-box"></div>
	<form action="{{ routes.cart_url }}" method="post" novalidate class="cart table-wrap" id="cartform" data-wetheme-section-type="template--cart" data-wetheme-section-id="cart">

		<table class="cart-table full table--responsive" border="0">
			<thead class="cart__row cart__header-labels">
				<th colspan="2" scope="col"></th>
				<th class="cart--price-column" scope="col">{{ 'cart.general.price' | t }}</th>
				<th scope="col">{{ 'cart.general.quantity' | t }}</th>
				<th class="cart--final-column" scope="col">{{ 'cart.general.total' | t }}</th>
			</thead>

			<tbody class="LOOP_icon-meals-dev_bundles" >
            {% include 'recharge-bundle-cart' %}
                  {% for item in cart.items %}
    {% comment %}
        LOOP SUBSCRIPTIONS (https://apps.shopify.com/loop-subscriptions)
        DO NOT modify this source code because
        It is automatically generated from LOOP SUBSCRIPTIONS BUNDLE DESIGN
        If you need to make change, please contact the Loop support team
        LOOP BUNDLE CODE STARTS
    {% endcomment %}
        {% assign isBundleItem = false %}
        {%- for property in item.properties -%}
            {% if property.first == '_bundleId' %}
                {% assign isBundleItem = true %}
                {% break %}
            {% endif %}
        {%- endfor -%}
        {% if isBundleItem == true %}
            {% continue %}
        {% endif %}
    {% comment %}
        LOOP BUNDLE CODE ENDS
    {% endcomment %}
    				{%- comment -%}Bold:PO 2.0 - Hybrid Input{%- endcomment -%}
    				{%- if item.properties._boldBuilderId  and item.properties._boldVariantIds == null -%}
    					<input type="hidden" name="updates[]" id="updates_{{- item.key -}}" class="bold_hidden_input cart__product-qty" value="{{- item.quantity -}}" min="0" data-id="{{- item.key -}}">
    					{%- continue -%}
    				{%- endif -%}
    				
    				
    					{%- if rc_bundles contains item.properties["_rc_bundle"] -%}
    						{%- unless rc_displayed_bundles contains item.properties["_rc_bundle"] -%}
    							{% include 'recharge-bundle-cart-item' rc_bundle_id: item.properties["_rc_bundle"] %}
    							 {%- comment -%}
    								Render bundle:
    							{%- endcomment -%}
    							<tr class="{% cycle 'even', 'odd' %}">
    								<td class="cart-table-image">
    									<a class="cart_thumb" href="{{rc_bundle_product.url}}" title="View {{rc_bundle_product.title}} Page">
    										{% render 'responsive-image' with rc_bundle_product %}
    									</a>
    								</td>

    								<td class="cart-table-title">
    									<a class="cart-table-title__title" href="{{ rc_bundle_product.url }}" title="View {{ rc_bundle_product.title | escape }}">{{ rc_bundle_product.title }}<span class="tdf-cart-item-t"></span></a>

    									{% unless rc_bundle_variant.title contains 'Default' %}
    										<div class="cart__meta-text">
    											{% for option in rc_bundle_product.options %}
    												<span>{{ option }}</span>: {{ rc_bundle_variant.options[forloop.index0] }}<br/>
    											{% endfor %}

    										</div>
    									{% endunless %}

    									{% if item.selling_plan_allocation %}
    										<div class="cart__meta-text">
    											<span>{{ item.selling_plan_allocation.selling_plan.name }}</span>
    										</div>
    									{% endif %}

    									
    									<br />
    										Contents:<br>{{ rc_bundle_contents | newline_to_br }}
    									<br>

    									<div class="cart-table-item-remove">
    										<a href="{{ rc_bundle_url_to_remove }}">{{ 'cart.general.remove' | t }}</a>
    									</div>
    								</td>

    								<td class="cart-table-price">
    									{%- if rc_bundle_selling_plan_allocation_compare_at_price > rc_bundle_price -%}
    										<span class="sr-only">{{ 'products.general.now_price' | t }}</span>
    										<span class="order-discount"><span class="">{{ rc_bundle_price | money }}</span></span>
    										<span class="sr-only">{{ 'products.general.was_price' | t }}</span>
    										<del><span class="compare-at-price">{{  rc_bundle_selling_plan_allocation_compare_at_price | money }}</span></del>
    									{%- else -%}
    										<span class="">{{  rc_bundle_selling_plan_allocation_compare_at_price | money }}</span>
    									{%- endif -%}
    								</td>

    								<td class="cart-table-quantity">
    									<div class="quantity-controls" data-stock-count="{{ item.variant.inventory_quantity }}" data-inventory-policy="{{ item.variant.inventory_policy }}" data-inventory_management="{{ item.variant.inventory_management }}">
    										<button
    											type="button"
    											class="qty-minus alt-focus"
    											aria-label="Reduce item quantity by one"
    											disabled
    										>-</button>
    										<label for="updates_{{item.variant.id}}" class="sr-only"></label>
    										<input
    											id="updates_{{item.variant.id}}"
    											class="number quantity-selector"
    											value="1"
    											aria-label="Quantity"
    											name="updates[]"
    											type="text"
    											size="4"
    											disabled
    										>
    										<button
    											type="button"
    											class="qty-plus alt-focus"
    											aria-label="Increase item quantity by one"
    											disabled
    										>+</button>
    									</div>
    									<div class="stock-error-message d-none">{{ 'cart.general.stock_error' | t }}</div>
    								</td>

    								<td class="cart-table-line-price cart--final-column">
    									{%- if rc_bundle_selling_plan_allocation_compare_at_price > rc_bundle_price -%}
    										<div>
    											<span class="sr-only">{{ 'products.general.now_price' | t }}</span>
    											<span class="order-discount"><span>{{ rc_bundle_price | money }}</span></span>
    											<span class="sr-only">{{ 'products.general.was_price' | t }}</span>
    											<del><span class="compare-at-price money">{{ rc_bundle_selling_plan_allocation_compare_at_price | money }}</span></del>
    										</div>
    									{%- else -%}
    										<span>{{ rc_bundle_selling_plan_allocation_compare_at_price | money }}</span>
    									{%- endif %}


    								</td>

    							</tr>
    						{%- endunless -%}

    					{%- else -%}
    					{% capture image_alt %}
    					{%- if item.image.alt != "" -%}{{item.image.alt}}{%- else -%}{{item.title}}{%- endif -%}
    				{% endcapture %}
    						<tr class="{% cycle 'even', 'odd' %} line-item id-{{ item.id }} {%- if item.line_level_discount_allocations != blank -%}discount--item{% endif %}">
    							<td class="cart-table-image">
    								<a class="cart_thumb" href="{{item.product.url}}" title="View {{item.title}} Page">
    									{% render 'responsive-image' with item, alt: image_alt %}
    								</a>
    							</td>

    							<td class="cart-table-title">
    								<a class="cart-table-title__title" href="{{ item.url }}" title="View {{ item.title | escape }}">{{ item.product.title }}<span class="tdf-cart-item-t"></span></a>

    								{% unless item.variant.title contains 'Default' %}
    									<div class="cart__meta-text">
    										{% for option in item.product.options %}
    											<span>{{ option }}</span>: {{ item.variant.options[forloop.index0] }}<br/>
    										{% endfor %}

    									</div>
    								{% endunless %}

    								{% if item.selling_plan_allocation %}
    									<div class="cart__meta-text">
    										<span>{{ item.selling_plan_allocation.selling_plan.name }}<span>
    									</div>
    								{% endif %}

    								{% assign property_size = item.properties | size %}
    								{% if property_size > 0 %}
    									<br />
    									{% for p in item.properties %}
    										{% if p.last != blank and p.first.first != '_' %}
    											{{ p.first }}:
    											{% comment %}
    											Check if there was an uploaded file associated
    											{% endcomment %}
    											{% if p.last contains '/uploads/' %}
    												<a href="{{ p.last }}">{{ p.last | split: '/' | last }}</a>
    											{% else %}
    												{{ p.last }}
    											{% endif %}
    											<br>
    										{% endif %}
    									{% endfor %}
    								{% endif %}

    								<div class="cart-table-item-remove">
    									<a href="{{ routes.cart_url }}/change?line={{ forloop.index }}&amp;quantity=0">{{ 'cart.general.remove' | t }}</a>
    								</div>
    							</td>

    							<td class="cart-table-price">
    								{%- if item.original_price != item.final_price -%}
    									<span class="sr-only">{{ 'products.general.now_price' | t }}</span>
    									<span class="Bold-theme-hook-DO-NOT-DELETE bold_cart_item_price" data-item-key="{{item.key}}" style="display:none !important;"></span>
    	<span class="order-discount"><span class="money">{{ item.final_price | money }}</span></span>
    									<span class="sr-only">{{ 'products.general.was_price' | t }}</span>
    									<del><span class="compare-at-price money">{{ item.original_price | money }}</span></del>
    								{%- else -%}
    									<span class="Bold-theme-hook-DO-NOT-DELETE bold_cart_item_price" data-item-key="{{item.key}}" style="display:none !important;"></span>
    	<span class="money">{{ item.original_price | money }}</span>
    								{%- endif -%}

    								{% if item.unit_price != blank %}
    								<span class="cart__price-unit-price">
    									{%- capture unit_price_separator -%}
    									<span aria-hidden="true">/</span>
    									{%- endcapture -%}
    									{%- capture unit_price_base_unit -%}
    									{%- if item.unit_price_measurement.reference_value != 1 -%}
    										{{- item.unit_price_measurement.reference_value -}}
    									{%- endif -%}
    										{{ item.unit_price_measurement.reference_unit }}
    									{%- endcapture -%}

    									<span data-unit-price>( {{ item.unit_price | money }}</span>{{- unit_price_separator -}}{{- unit_price_base_unit -}})
    								</span>
    								{% endif %}
    							</td>

    							<td class="cart-table-quantity">
    								<div class="quantity-controls" data-stock-count="{{ item.variant.inventory_quantity }}" data-inventory-policy="{{ item.variant.inventory_policy }}" data-inventory_management="{{ item.variant.inventory_management }}">
    									<button
    										type="button"
    										class="qty-minus alt-focus"
    										aria-label="Reduce item quantity by one"
    									>-</button>
    									<label for="updates_{{item.variant.id}}" class="sr-only"></label>
    									<input
    										id="updates_{{item.variant.id}}"
    										class="number quantity-selector"
    										value="{{item.quantity}}"
    										aria-label="Quantity"
    										name="updates[]"
    										type="text"
    										size="4"
    									>
    									<button
    										type="button"
    										class="qty-plus alt-focus"
    										aria-label="Increase item quantity by one"
    									>+</button>
    								</div>
    								<div class="stock-error-message d-none">{{ 'cart.general.stock_error' | t }}</div>
    							</td>

    							<td class="cart-table-line-price cart--final-column">
    								{%- if item.original_line_price != item.final_line_price -%}
    									<div>
    										<span class="sr-only">{{ 'products.general.now_price' | t }}</span>
    										<span class="Bold-theme-hook-DO-NOT-DELETE bold_cart_item_total" data-item-key="{{item.key}}" style="display:none !important;"></span>
    	<span class="order-discount"><span class="money">{{ item.final_line_price | money }}</span></span>
    										<span class="sr-only">{{ 'products.general.was_price' | t }}</span>
    										<del><span class="compare-at-price money">{{ item.original_line_price | money }}</span></del>
    									</div>
    								{%- else -%}
    									<span class="Bold-theme-hook-DO-NOT-DELETE bold_cart_item_total" data-item-key="{{item.key}}" style="display:none !important;"></span>
    	<span class="money">{{ item.original_line_price | money }}</span>
    								{%- endif %}

    								{%- if item.line_level_discount_allocations != blank -%}
    									<ul class="order-discount--cart-list" aria-label="{{ 'customer.order.discount' | t }}">
    										{%- for discount_allocation in item.line_level_discount_allocations -%}
    										<li class="order-discount--item">
    											{{ discount_allocation.discount_application.title }} <span class="sr-only">{{ 'products.general.saving' | t }} </span>(-<span class="money">{{ discount_allocation.amount | money }}</span>)
    										</li>
    										{%- endfor -%}
    									</ul>
    								{%- endif %}

    							</td>

    						</tr>
    					{%- endif -%}
    				{% endfor %}
    			</tbody>
    		</table>
{%- comment -%}
<!-- Start of Upsell Widget -->
<div class="upsell-widget-container-unique">
    <div class="upsell-header-unique">
        <h3>Protein Packed Stocking Stuffers!</h3>
        <div class="countdown-timer-unique"></div>
    </div>
    <div class="upsell-products-unique">
        <!-- Product 1 -->
        <div class="upsell-product-unique">
            <img src="https://cdn.shopify.com/s/files/1/1957/2713/files/4x-Bundle_v1.jpg?v=1732110483" alt="4x Protein Popcorn Bundle" class="product-image-unique">
            <h4 class="product-title-unique">4x Protein Popcorn Bundle</h4>
            <p class="product-description-unique">Get 4 bags of our delicious Protein Popcorn at a special price! Choose your favorite flavors.</p>
            <div class="product-price-unique">
                <del>$39.96</del> <span>$19.99</span>
            </div>
            <a href="https://iconmeals.com/products/black-friday-protein-popcorn-mega-deal" class="cta-button-unique">Shop Now</a>
        </div>
        <!-- Product 2 -->
        <div class="upsell-product-unique">
            <img src="https://cdn.shopify.com/s/files/1/1957/2713/files/10x-Bundle_v1.jpg?v=1732110483" alt="10x Protein Popcorn Bundle" class="product-image-unique">
            <h4 class="product-title-unique">10x Protein Popcorn Bundle</h4>
            <p class="product-description-unique">Get 10 bags of our delicious Protein Popcorn at a special price! Choose your favorite flavors.</p>
            <div class="product-price-unique">
                <del>$99.90</del> <span>$39.99</span>
            </div>
            <a href="https://iconmeals.com/products/black-friday-protein-popcorn-mega-deal" class="cta-button-unique">Shop Now</a>
        </div>
    </div>
</div>
<!-- End of Upsell Widget -->
{%- endcomment -%}

<!-- Upsell Widget Styles -->
<style>
.upsell-widget-container-unique {
    border: 2px solid #000;
    padding: 20px;
    margin: 30px auto;
    background-color: #fff;
    color: #000;
    font-family: Arial, sans-serif;
    max-width: 80%;
}

.upsell-header-unique {
    text-align: center;
    margin-bottom: 20px;
}

.upsell-header-unique h3 {
    color: #d00; /* Red color */
}

.countdown-timer-unique {
    font-size: 1.2em;
    color: #d00; /* Red color */
}

.upsell-products-unique {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
}

.upsell-product-unique {
    width: 48%;
    box-sizing: border-box;
    margin-bottom: 20px;
    border: 1px solid #ccc;
    padding: 15px;
    background-color: #f9f9f9;
    text-align: center;
}

.product-image-unique {
    max-width: 100%;
    height: auto;
    margin-bottom: 10px;
}

.product-title-unique {
    font-size: 1.1em;
    color: #000;
    margin-bottom: 10px;
}

.product-description-unique {
    font-size: 0.9em;
    color: #555;
    margin-bottom: 10px;
}

.product-price-unique {
    font-size: 1.3em;
    color: #000;
    margin-bottom: 15px;
}

.product-price-unique del {
    color: #888;
    margin-right: 5px;
}

.cta-button-unique {
    display: inline-block;
    padding: 10px 20px;
    background-color: #d00 !important; /* Red color */
    color: #fff !important;
    text-decoration: none !important;
    border-radius: 5px !important;
    font-weight: bold !important;
}

.cta-button-unique:hover {
    background-color: #a00 !important;
}

@media screen and (max-width: 767px) {
    .upsell-widget-container-unique {
        max-width: 100%;
    }
    .upsell-products-unique {
        flex-direction: column;
    }
    .upsell-product-unique {
        width: 100%;
    }
}
</style>
<!-- End of Upsell Widget Styles -->

<!-- Countdown Timer Script -->
<script>
(function() {
    // Set the date we're counting down to
    var countDownDate = new Date("2024-11-25T23:59:59Z").getTime(); // Set your desired countdown date here

    // Update the count down every 1 second
    var x = setInterval(function() {

        // Get today's date and time
        var now = new Date().getTime();

        // Find the distance between now and the count down date
        var distance = countDownDate - now;

        // Time calculations for days, hours, minutes and seconds
        var days = Math.floor(distance / (1000 * 60 * 60 * 24));
        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

        // Output the result in elements with class="countdown-timer-unique"
        var countdownElements = document.getElementsByClassName("countdown-timer-unique");
        for (var i = 0; i < countdownElements.length; i++) {
            countdownElements[i].innerHTML = days + "d " + hours + "h "
            + minutes + "m " + seconds + "s ";
        }

        // If the count down is finished, write some text
        if (distance < 0) {
            clearInterval(x);
            for (var i = 0; i < countdownElements.length; i++) {
                countdownElements[i].innerHTML = "EXPIRED";
            }
        }
    }, 1000);
})();
</script>
<!-- End of Countdown Timer Script -->

    		<div class="cart-bottom-box">

    			{% if settings.allow_note %}
    				<div class="col-lg-6 checkout-add-note mobile">
    					<label for="note">{{ 'cart.general.note' | t }}&hellip;</label>
    					<textarea id="note" name="note" class="form-control">{{ cart.note }}</textarea>
    					&nbsp;
    				</div>
    			{% endif %}

    			{%- if cart.cart_level_discount_applications != blank -%}
    				<div class="cart--order-discount-wrapper custom-font">
    					{%- for discount_application in cart.cart_level_discount_applications -%}
    					<div class="cart--order-discount-wrapper--indiv">
    						<span class="order-discount--cart-title">
    							<span class="hide">{{ 'customer.order.discount' | t }}:</span>{{- discount_application.title -}}
    						</span>
    						<span class="order-discount">-<span class="money">{{ discount_application.total_allocated_amount | money }}</span></span>
    					</div>
    					{%- endfor -%}
    				</div>
    			{%- endif -%}

    			<div class="cart-totals--wrapper">
    				<div id="cart-total-header">{{ 'cart.general.subtotal' | t }}</div>
    				<div id="cart-total-final-price">
    					<span class="Bold-theme-hook-DO-NOT-DELETE bold_cart_total" style="display:none !important;"></span>
    <span class="money"><span style="display:none" class="tdf-cart-total-flag"></span>{{ cart.total_price | money }}</span>
    				</div>
    			</div>

    			{%- capture taxes_shipping_checkout -%}
    				{%- if cart.taxes_included and shop.shipping_policy.body != blank -%}
    					{{ 'cart.general.taxes_included_and_shipping_policy_html' | t: link: shop.shipping_policy.url }}
    				{%- elsif cart.taxes_included -%}
    					{{ 'cart.general.taxes_included_but_shipping_at_checkout' | t }}
    				{%- elsif shop.shipping_policy.body != blank -%}
    					{{ 'cart.general.taxes_and_shipping_policy_at_checkout_html' | t: link: shop.shipping_policy.url }}
    				{%- else -%}
    					{{ 'cart.general.taxes_and_shipping_at_checkout' | t }}
    				{%- endif -%}
    			{%- endcapture -%}
         
                    <div class="row justify-content-center justify-content-md-end">

    				{% if settings.allow_note %}
    					<div class="col-lg-6 checkout-add-note desktop">
    						<label for="note">{{ 'cart.general.note' | t }}&hellip;</label>
    						<textarea id="note" name="note" class="form-control">{{ cart.note }}</textarea>
    						&nbsp;
    					</div>
    				{% endif %}

    				<div class="{% if settings.allow_note %}col-lg-6{% else %}col-md{% endif %}">
    					<div class="cart--shipping-message">{{ taxes_shipping_checkout }}</div>

    					{% if settings.free_shipping_message != blank and settings.free_shipping_amount != blank and settings.free_shipping_achieved != blank and settings.enable_shipping_encouragement %}
    						<div data-free-shipping-msg >
    							{% render 'free-shipping-message' %}
    						</div>
    					{% endif %}

                        {%- comment -%}
    					START CONDITIONAL CART PRODUCT NOTIFICATION DISPLAY
    					{%- endcomment -%}
                        {% assign collection_id = 273704878267 %}
                        {% assign product_id_1 = 10671264323 %}
                        {% assign product_id_2 = 10596825091 %}
                        {% assign item_count = 0 %}
                        
                        {% for item in cart.items %}
                          {% assign in_collection = false %}
                          {% for collection in item.product.collections %}
                            {% if collection.id == collection_id %}
                              {% assign in_collection = true %}
                            {% endif %}
                          {% endfor %}
                        
                          {% if in_collection or item.product.id == product_id_1 or item.product.id == product_id_2 %}
                            {% assign item_count = item_count | plus: item.quantity %}
                          {% endif %}
                        {% endfor %}
                        
                        {% if item_count > 0 and item_count < 8 %}
                          <div style="border: 2px solid #ff0000; padding: 15px; margin: 20px 0; background-color: #fff3f3; color: #ff0000; text-align: center;">
                              <strong>Important Notice:</strong> We cannot guarantee delivery of orders with fewer than 8 meals. Please add additional meals to your cart.
                          </div>
                        {% endif %}
                        {%- comment -%}
    					END CONDITIONAL CART PRODUCT NOTIFICATION DISPLAY
    					{%- endcomment -%}
                      
    					<div id="checkout-buttons">
    						<a href="{{ routes.root_url }}" class="btn secondary-button continue-shopping--cart">{{ 'layout.cart.continue_shopping' | t }}</a>

    						<input id="update_quantities" type="submit" value="{{ 'cart.general.update' | t }}" title="{{ 'cart.general.update' | t }}" name="update" class="btn secondary-button" />
    						<input id="cart_submit" type="submit" value="{{ 'cart.general.checkout' | t }}" name="checkout" class="btn" />
    					</div>

    					{% if additional_checkout_buttons and settings.enable-additional-checkout-buttons %}
    						<div class="additional-checkout-buttons additional-checkout-buttons--vertical">
    							{{ content_for_additional_checkout_buttons }}
    						</div>
    					{% endif %}

    				</div>
    			</div>
    		</div>

    	</form>

    	<script type="application/json" id="initial-cart">
    		{{ cart | json }}
    	</script>

    	{% endif %}
    </div>


        <script>
          $(document).on('click', '.quantity-controls *', function(){
            setTimeout(function(){
             if (window.BOLD && BOLD.common && BOLD.common.eventEmitter &&
                      typeof BOLD.common.eventEmitter.emit === 'function'){
                    BOLD.common.eventEmitter.emit('BOLD_COMMON_cart_loaded');
     }
            },500);
          });
        </script>
    <script defer="defer">
      window.Loop = {};
      window.Loop.bundleCartAllItems = {{ cart.items | json }};
      initLoopBundle("LOOP_icon-meals-dev_bundles");
    </script>
