<section class="entry-content product-description-main-wrapper variant-dropdown-enabled{% if settings.enable_store_pickup %} store-pickup-enabled{% endif %}">
  {%- if section.settings.show_out_of_stock_email and section.settings.out_of_stock_email_position == 'above-details' -%}
    <div class="variant-out-of-stock"{% unless sold_out %} style="display:none;"{% endunless %}>
      {%- comment -%} This is the out of stock email form capture - no need to copy it again here {% endcomment -%}
    </div>
  {%- endif -%}

  {%- form 'product', product, id: "add-to-cart-form" -%}
    <input type="hidden" id="cart-link" value="{{ routes.cart_url }}" />
    {%- assign hide_default_title = false -%}
    {%- if product.variants.size == 1 and product.variants.first.title contains 'Default' -%}{%- assign hide_default_title = true -%}{%- endif -%}
    <div class="product-info-wrapper">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when '@app' -%}{% render block %}
          {%- when 'vendor-sku' -%}<div class="row product-vendor-sku">{% if block.settings.show_vendor %}<div class="indiv-product-vendor-text col-{% if block.settings.show_sku %}6{% else %}12{% endif %}">{{ product.vendor }}</div>{% endif %}{% if block.settings.show_sku %}<div class="indiv-product-sku-text col-{% if block.settings.show_vendor %}6 text-right{% else %}12{% endif %}{% unless current_variant.sku %} hide{% endunless %}">{{ current_variant.sku }}</div>{% endif %}</div>
          {%- when 'product-title' -%}<h1 class="custom-font product-description-header">{{ product.title }}</h1>{% render 'benefit-badges' %}
          {%- when 'product-price' -%}
            {%- unless block.settings.show_discount == 'hide' -%}<div class="product-page--pricing--discount {% unless current_variant.available and on_sale %} hide{% endunless %}">{%- case block.settings.show_discount -%}{%- when 'percentage' -%}{%- unless product.has_only_default_variant -%}<span class="variant-percentage-wrapper">- <span class="variant-percentage">{{ current_variant.compare_at_price | minus: current_variant.price | times: 100.0 | divided_by: current_variant.compare_at_price | money_without_currency | times: 100 | remove: '.0'}}%</span></span>{%- else -%}<span class="variant-percentage-wrapper">- <span class="variant-percentage">{{ current_variant.compare_at_price | minus: current_variant.price | times: 100.0 | divided_by: current_variant.compare_at_price | floor }}%</span></span>{%- endunless -%}{%- when 'value' -%}<span class="variant-value-wrapper">- <span class="variant-value"><span class="money">{{ current_variant.compare_at_price | minus: current_variant.price | money }}</span></span></span>{%- endcase -%}</div>{%- endunless -%}
            <ul class="product-page--pricing">{% render 'product-pricing', current_variant: current_variant %}{% render 'unit-price-measurement-variant', current_variant: current_variant %}</ul>
            {%- if cart.taxes_included or shop.shipping_policy.body != blank -%}<div class="product-page__policies rte">{%- if cart.taxes_included and block.settings.tax_included -%}{{ 'products.product.include_taxes' | t }}{%- endif -%}{%- if shop.shipping_policy.body != blank and block.settings.shipping_policy -%}{{ 'products.product.shipping_policy_html' | t: link: shop.shipping_policy.url }}{%- endif -%}</div>{%- endif -%}
          {%- when 'product-options' -%}
            {%- if product.variants.size > 0 -%}{%- for option in product.options_with_values -%}<div class="product-form-option col-12{% if hide_default_title == true %} hide{% endif %}"><div class="input-field product-option-select"><wetheme-dropdown fit="parent"><select id="SingleOptionSelector-{{ forloop.index0 }}" class="wetheme-dropdown__select"{% if option.values.size == 1 %} disabled{% endif %}>{%- for value in option.values -%}{%- if option.selected_value == value -%}{%- assign props = 'selected' -%}{%- else -%}{%- assign props = '' -%}{%- endif -%}{%- if product.options_with_values.size == 1 and section.settings.hide_out_of_stock -%}{%- assign hide = true -%}{%- for v in product.variants -%}{%- if v.option1 == value and v.available -%}{%- assign hide = false -%}{%- endif -%}{%- endfor -%}{%- else -%}{%- assign hide = false -%}{%- endif -%}{%- unless hide -%}<option {{ props }} value="{{ value | escape }}">{{ value }}</option>{%- endunless -%}{%- endfor -%}</select><label for="SingleOptionSelector-{{ forloop.index0 }}">{{ option.name }}</label></wetheme-dropdown></div></div>{%- endfor -%}{%- endif -%}
            {% render 'product-select', section_id: section.id, variants: product.variants %}<div class="rc-widget-injection-parent"></div>
          {%- when 'quantity-selector' -%}<div class="quantity-controls__outer selector-wrapper col-md-6 col-sm-12 col-12"><label for="quantity">{{ 'products.product.quantity' | t }}</label><div class="quantity-controls"><button type="button" class="qty-minus alt-focus" aria-label="Reduce item quantity by one">-</button><label for="quantity" class="sr-only"></label><input id="quantity" class="quantity-selector" value="1" min="1" type="text" name="quantity"><button type="button" class="qty-plus alt-focus" aria-label="Increase item quantity by one">+</button></div></div>
          {%- when 'payment-buttons' -%}<div class="bold_options" data-product-id="{{ product.id }}"></div><div class="col-md-12 product-page--submit-action" data-stock-email-enabled="{{ section.settings.show_out_of_stock_email }}">{%- assign disabled = false -%}{%- unless current_variant.available -%}{%- assign disabled = true -%}{%- endunless -%}<button type="submit" name="add" id="purchase" class="btn {% if block.settings.show_smart_checkout and product.selling_plan_groups.size == 0 %} secondary-button{% endif %}"{% if disabled %} disabled{% endif %}>{%- if current_variant.available -%}{{ 'products.product.add_to_cart' | t }}{%- else -%}{{ 'products.product.sold_out' | t }}{%- endif -%}</button>{%- if block.settings.show_smart_checkout and product.available -%}{{ form | payment_button }}{%- endif -%}</div>
          {%- when 'shop-pay' -%}<div class="shopify-payment-terms__container">{{ form | payment_terms }}</div>
          {%- when 'social-sharing' -%}{% render 'social-sharing' with settings: block.settings %}
          {%- when 'local-pickup' -%}{%- if settings.enable_store_pickup -%}<div class="product-page--local-pickup"></div>{%- endif -%}
          {%- when 'product-description' -%}<div class="product-description-wrapper">{{ product.description }}</div>
          {%- when 'cross-sells' -%}{% render 'cross-sells' with block_settings: block.settings %}
          {%- when 'image-offer' -%}<div class="image-offer-container">{%- if block.settings.link != blank and block.settings.image != blank -%}<a href="{{ block.settings.link }}" class="image-offer-container--is-link">{%- endif -%}{%- if block.settings.image == blank -%}{{ 'lifestyle-1' | placeholder_svg_tag: 'icon--placeholder' }}{%- else -%}{%- capture alt -%}{{ block.settings.image.alt | default: shop.name }}{%- endcapture -%}{% render 'responsive-image' with block.settings.image, blur: 'center', alt: alt %}{%- endif -%}{%- if block.settings.link != blank and block.settings.image != blank -%}</a>{%- endif -%}</div><style>.image-offer-container--is-link:hover img { border-color: {{ block.settings.hover_border_color }}; }</style>
          {%- when 'text-with-icon' -%}{% render 'text-with-icon', icon: block.settings.icon, text: block.settings.text, link: block.settings.link  %}
          {%- when 'product-card-macros' -%}
            {%- assign macros = product.metafields.macros -%}
            <div class="macrowrapperv2">{%- if macros.macros_calories != blank -%}<div class="macro-item"><span class="macro-value">{{ macros.macros_calories }}</span><span class="macro-title">Calories</span><div class="macro-bar calories-bar"></div></div>{%- endif -%}{%- if macros.macros_protein != blank -%}<div class="macro-item"><span class="macro-value">{{ macros.macros_protein }}g</span><span class="macro-title">Protein</span><div class="macro-bar protein-bar"></div></div>{%- endif -%}{%- if macros.macros_carbs != blank -%}<div class="macro-item"><span class="macro-value">{{ macros.macros_carbs }}g</span><span class="macro-title">Carbs</span><div class="macro-bar carbs-bar"></div></div>{%- endif -%}{%- if macros.macros_fats != blank -%}<div class="macro-item"><span class="macro-value">{{ macros.macros_fats }}g</span><span class="macro-title">Fats</span><div class="macro-bar fats-bar"></div></div>{%- endif -%}{%- if macros.macros_fiber != blank -%}<div class="macro-item"><span class="macro-value">{{ macros.macros_fiber }}g</span><span class="macro-title">Fiber</span><div class="macro-bar fiber-bar"></div></div>{%- endif -%}{%- if macros.macros_sodium != blank -%}<div class="macro-item"><span class="macro-value">{{ macros.macros_sodium }}mg</span><span class="macro-title">Sodium</span><div class="macro-bar sodium-bar"></div></div>{%- endif -%}</div>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  {%- endform -%}
  {%- if section.settings.show_out_of_stock_email and section.settings.out_of_stock_email_position == 'below-details' -%}
    <div class="variant-out-of-stock"{% unless sold_out %} style="display:none;"{% endunless %}>
        {%- comment -%} This is the out of stock email form capture - no need to copy it again here {% endcomment -%}
    </div>
  {%- endif -%}
</section>