{%- comment -%}
  ==============================================================================
  POPCORN SALE BANNER - OPTIMIZED V4 (MOBILE SPACING FIX)
  - Stars: SVG Icons.
  - Desktop: Image fills 100% width of column.
  - Mobile: Added 40px top padding for breathing room around badge.
  ==============================================================================
{%- endcomment -%}

{%- liquid
  assign product = product_obj
-%}

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

<style>
  .pop-promo-wrapper {
    --pop-red: #C6392D;
    --pop-dark: #111111;
    --pop-gold: #FFB300;
    --pop-font: 'Inter', sans-serif;
    --pop-radius: 8px;
    
    font-family: var(--pop-font);
    color: var(--pop-dark);
    width: 100%; 
    margin: 0 0 30px 0;
    box-sizing: border-box;
  }

  .pop-promo-wrapper * { box-sizing: border-box; }

  /* --- MAIN BOX --- */
  .pop-sale-box {
    background: #fff;
    border: 2px solid var(--pop-dark);
    border-radius: var(--pop-radius);
    display: flex;
    flex-direction: row;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05); 
    text-decoration: none;
    position: relative;
  }

  /* --- IMAGE SIDE --- */
  .pop-sale-img {
    flex: 0 0 45%; 
    background: #ffffff; 
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px; 
    border-right: 1px solid #eee;
    position: relative;
    min-height: 320px;
  }
  
  .pop-sale-img img { 
    width: 100%; 
    height: auto; 
    max-width: 100%; 
    object-fit: contain;
    transition: transform 0.3s ease;
    display: block;
  }
  
  .pop-sale-box:hover .pop-sale-img img { transform: scale(1.03); }

  /* Flash Badge */
  .pop-flash-badge {
    position: absolute;
    top: 15px;
    left: 15px;
    background: var(--pop-red);
    color: #fff;
    font-weight: 800;
    padding: 6px 10px;
    border-radius: 4px;
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
    z-index: 2;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  }

  /* --- CONTENT SIDE --- */
  .pop-sale-content {
    flex: 1;
    padding: 30px 40px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: left;
  }

  /* SVG Stars */
  .pop-stars {
    display: flex;
    align-items: center;
    gap: 4px;
    margin-bottom: 8px;
  }
  .pop-star-icon {
    width: 18px;
    height: 18px;
    color: var(--pop-gold);
    fill: currentColor;
  }
  .pop-review-count {
    color: #888;
    font-weight: 500;
    font-size: 0.8rem;
    margin-left: 6px;
    margin-top: 2px;
  }

  /* Headlines */
  .pop-headline-small { 
    color: var(--pop-dark); 
    font-weight: 900; 
    font-size: 2rem; 
    line-height: 1;
    text-transform: uppercase;
    margin: 0 0 5px 0;
    letter-spacing: -0.03em;
  }
  
  .pop-subtext {
    font-size: 1rem;
    color: var(--pop-red);
    font-weight: 700;
    text-transform: uppercase;
    margin-bottom: 15px;
    letter-spacing: 0.05em;
  }

  /* PRICE ROW */
  .pop-price-row { 
    display: flex; 
    align-items: baseline; 
    gap: 10px; 
    margin-bottom: 20px; 
    border-bottom: 1px solid #eee;
    padding-bottom: 15px;
  }
  .pop-main-price { font-size: 3rem; font-weight: 900; color: var(--pop-dark); line-height: 1; letter-spacing: -0.04em; }
  .pop-compare-price { font-size: 1.2rem; text-decoration: line-through; color: #999; font-weight: 600; }
  
  /* BULLETS */
  .pop-bullets { list-style: none; padding: 0; margin: 0 0 25px 0; }
  .pop-bullets li { 
    position: relative; 
    padding-left: 24px; 
    margin-bottom: 8px; 
    font-weight: 600; 
    font-size: 0.95rem;
    color: #333;
    line-height: 1.3;
  }
  .pop-bullets li::before { 
    content: '✓'; 
    position: absolute; 
    left: 0; 
    color: var(--pop-red); 
    font-weight: 900; 
    font-size: 1rem;
  }

  /* CTA LINK BUTTON */
  a.pop-cta-btn {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    background: var(--pop-red);
    color: #fff;
    text-align: center;
    padding: 16px 20px;
    border-radius: 6px;
    font-weight: 800;
    font-size: 1.15rem;
    text-decoration: none !important;
    text-transform: uppercase;
    border: none;
    box-shadow: 0 4px 10px rgba(198, 57, 45, 0.25);
    cursor: pointer;
    transition: all 0.2s ease;
  }
  a.pop-cta-btn:hover { 
    transform: translateY(-2px); 
    box-shadow: 0 6px 15px rgba(198, 57, 45, 0.35); 
    color: #fff; 
  }
  a.pop-cta-btn span { margin-left: 8px; transition: margin 0.2s; }
  a.pop-cta-btn:hover span { margin-left: 12px; }

  /* Footer Note */
  .pop-footer-note {
    text-align: center;
    font-weight: 700;
    font-size: 0.75rem;
    color: #999;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-top: 12px;
  }

  /* --- MOBILE --- */
  @media (max-width: 768px) {
    .pop-sale-box { flex-direction: column; }
    
    /* MOBILE FIX: Added top padding (40px) so badge doesn't overlap image headers */
    .pop-sale-img { 
      width: 100%; 
      padding: 40px 0 20px 0; 
      border-right: none; 
      border-bottom: 1px solid #eee; 
      min-height: auto; 
    }
    
    .pop-sale-img img { max-width: 100%; }
    .pop-sale-content { padding: 30px 20px; align-items: center; text-align: center; }
    .pop-headline-small { font-size: 1.6rem; }
    .pop-stars { justify-content: center; }
    .pop-bullets { text-align: left; align-self: flex-start; margin: 0 auto 20px; }
    .pop-price-row { justify-content: center; width: 100%; }
    .pop-main-price { font-size: 2.6rem; }
  }
</style>

<div class="pop-promo-wrapper">
  <div class="pop-sale-box">
    
    <!-- Image Column -->
    <div class="pop-sale-img">
      <div class="pop-flash-badge">Selling Fast!</div>
      <a href="{{ product.url }}" style="display:block; width:100%; text-align:center;">
        {% if product.featured_image != blank %}
          <img src="{{ product.featured_image | img_url: '800x' }}" alt="{{ product.title }}">
        {% else %}
          <img src="https://cdn.shopify.com/s/files/1/0063/5623/8395/files/popcorn_6pack_placeholder.jpg" alt="Protein Popcorn">
        {% endif %}
      </a>
    </div>

    <!-- Content Column -->
    <div class="pop-sale-content">
      
      <!-- Fixed Star Rating with SVGs -->
      <div class="pop-stars">
        {% for i in (1..5) %}
          <svg class="pop-star-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" />
          </svg>
        {% endfor %}
        <span class="pop-review-count">(500+ Reviews)</span>
      </div>

      <h2 class="pop-headline-small">Protein Popcorn<br>6-Pack</h2>
      <div class="pop-subtext">Bundle & Save</div>
      
      <div class="pop-price-row">
        <span class="pop-main-price">$44.99</span>
        <span class="pop-compare-price">$59.94</span> 
      </div>

      <ul class="pop-bullets">
        <li>10g protein per serving</li>
        <li>Satisfying crunch, fits your macros</li>
        <li>Gluten-free & made in Texas</li>
      </ul>

      <!-- LINK BUTTON -->
      <a href="{{ product.url }}" class="pop-cta-btn">
        Customize Your 6-Pack <span>&rarr;</span>
      </a>

      <div class="pop-footer-note">
        Select Flavors Next • No Subscription Required
      </div>

    </div>
  </div>
</div>